<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="remark/remark.js" type="text/javascript">
        {
            "highlightStyle": "solarized_light",
            "highlightLanguage": "no-highlight"
        }
    </script>
    <style type="text/css" media="screen">
/*
SOLARIZED HEX     16/8 TERMCOL  XTERM/HEX   L*A*B      RGB         HSB
--------- ------- ---- -------  ----------- ---------- ----------- -----------
base03    #002b36  8/4 brblack  234 #1c1c1c 15 -12 -12   0  43  54 193 100  21
base02    #073642  0/4 black    235 #262626 20 -12 -12   7  54  66 192  90  26
base01    #586e75 10/7 brgreen  240 #585858 45 -07 -07  88 110 117 194  25  46
base00    #657b83 11/7 bryellow 241 #626262 50 -07 -07 101 123 131 195  23  51
base0     #839496 12/6 brblue   244 #808080 60 -06 -03 131 148 150 186  13  59
base1     #93a1a1 14/4 brcyan   245 #8a8a8a 65 -05 -02 147 161 161 180   9  63
base2     #eee8d5  7/7 white    254 #e4e4e4 92 -00  10 238 232 213  44  11  93
base3     #fdf6e3 15/7 brwhite  230 #ffffd7 97  00  10 253 246 227  44  10  99
yellow    #b58900  3/3 yellow   136 #af8700 60  10  65 181 137   0  45 100  71
orange    #cb4b16  9/3 brred    166 #d75f00 50  50  55 203  75  22  18  89  80
red       #dc322f  1/1 red      160 #d70000 50  65  45 220  50  47   1  79  86
magenta   #d33682  5/5 magenta  125 #af005f 50  65 -05 211  54 130 331  74  83
violet    #6c71c4 13/5 brmagenta 61 #5f5faf 50  15 -45 108 113 196 237  45  77
blue      #268bd2  4/4 blue      33 #0087ff 55 -10 -45  38 139 210 205  82  82
cyan      #2aa198  6/6 cyan      37 #00afaf 60 -35 -05  42 161 152 175  74  63
green     #859900  2/2 green     64 #5f8700 60 -20  65 133 153   0  68 100  60
*/

body {
    font-size:        1.3em;
}

.slide .inverse {
    color:            #839496; /* base0  */
    background-color: #002b36; /* base03 */
}

.slide {
    color:            #657b83; /* base00 */
    background-color: #fdf6e3; /* base3 */
}

.slide pre, .slide code {
    color:            #586e75; /* base01 */
    background-color: #eee8d5; /* base2 */
}

.slide .inverse pre, .slide .inverse code {
    color:            #93a1a1; /* base1 */
    background-color: #073642; /* base02 */
}

a:link, a:visited, a:hover, a:active {
    color:            #268bd2; /* blue */
}

.footnote {
    position: absolute;
    bottom: 3em;
}
.footnote.right {
    right: 3em;
}
.code {
    font-family: Monaco, monospace;
}

    </style>
  </head>
  <body>
    <textarea id="source">
name: title
layout: true
class: center, middle, inverse
---

# Building Command-Line Apps

.footnote.right[[Chicago Perl Mongers](http://chicago.pm.org)]
---
layout: false
class: center, middle

# You're working with text

---
class: center, middle
layout: true
---

# You like the command-line
efficient and friendly

---

# You don't need a GUI

---
class: center, middle

# Shell scripts aren't strong enough
&bull; poor scalability

&bull; bytestreams aren't everything

---
class: center, middle

# Perl is an elegant solution
for a more civilized age

---
class: center, middle

# TIMTOWTDI
There Is More Than One Way To Do It

---
template: title

# Core Parts

---

# Input
&bull; Arguments: `&lt;argument&gt;`

&bull; Options: `[--option] [-h] [-R3]`

&bull; Standard Input: `STDIN`

---

# Output

&bull; Standard Output: `STDOUT`

&bull; Standard Error: `STDERR`

&bull; Exit Code: (0-255)

---

# User Documentation

---

# Code Organization

---
template: title

# Basic Scripts

---
layout: false
class: middle

.center[
# Start off right
]
```perl
use strict;
use warnings;
```

---
class: middle

.center[
# Arguments
## .code[@ARGV]
]

```perl
use strict;
use warnings;
use feature qw( say );
say "Hello, $ARGV[0]!";
```

```
$ perl greet.pl Chicago
Hello, Chicago!
```

---
class: middle

.center[
# Options
## .code[Getopt::Long]
]

```perl
use feature qw( say );
use Getopt::Long;
my %opt = (
    greeting => 'Hello',
);
GetOptions( \%opt,
    'greeting:s',
);
say "$opt{greeting}, $ARGV[0]!";
```
```
$ perl greet.pl Chicago
Hello, Chicago!
$ perl greet.pl --greeting Goodbye Cleveland
Goodbye, Cleveland!
```
---
class: middle

.center[
# Standard Input
]
```perl
use feature qw( say );
for my $line ( <STDIN> ) {
    my @emails = ( $line =~ /(\S+[@]\S+)/g );
    say for @emails;
}
```
```
$ perl find_emails.pl < /var/spool/mail/victim
flannel@selfies.com
shabby@chic.com
Wes@Anderson.com
batch@Godard.org
trust@fund.org
```

---
class: middle

.center[
# Standard Output
]
```perl
use feature qw( say );
say 'Hello, World!';
```
```
$ perl hello.pl
Hello, World!
```

---
class: middle

.center[
# Standard Error
]
```perl
use warnings;
warn "Look out, World!"
die "I'm going down!\n"
```
```
$ perl warn.pl
Look out, World! at warn.pl line 2.
I'm going down!
```

---
class: middle
.center[
# STDOUT vs STDERR
]
```perl
use warnings;
use feature qw( say );
say "Hello, World!"
warn "Look out, World!"
die "I'm going down!\n"
```
```
$ perl stdouterr.pl 1>stdout.txt 2>stderr.txt
$ cat stdout.txt
Hello, World!
$ cat stderr.txt
Look out, World! at stdouterr.pl line 4.
I'm going down!
```
---
class: middle
.center[
# Exit Status
]
```
$ perl hello.pl
Hello, World!
$ echo $?
0
$ perl warn.pl
Look out, World! at warn.pl line 2.
I'm going down!
$ echo $?
255
```
---
class: middle
.center[
# 0 is good
Everything else is bad
]
```
$ perl hello.pl && perl warn.pl
Hello, World!
Look out, World! at warn.pl line 2.
I'm going down!

$ perl warn.pl && perl hello.pl
Look out, World! at warn.pl line 2.
I'm going down!
```
---
class: middle
.center[
# Choose your exit
]
```perl
use feature qw( say );
say "Exit code $ARGV[0]";
exit $ARGV[0];
```
```
$ perl exit.pl 0
Exit code 0

$ echo $?
0

$ perl exit.pl 1
Exit code 1

$ echo $?
1
```
---
class: center middle

# User Documentation
Pod::Usage

---
class: middle

.center[
# Plain Old Documentation
]
```
=head1 NAME

greet.pl - Say hello!

=head1 SYNOPSIS

    perl greet.pl [--greeting <greeting>] <who>

=head1 ARGUMENTS

=head2 who

Who to greet. Defaults to "World"

=head1 OPTIONS

=head2 greeting

The greeting to use. Defaults to "Hello"
```
---
class: middle
.center[
# Read The Fine Manual
]
```
$ perldoc greet.pl
GREET(1)       User Contributed Perl Documentation      GREET(1)

NAME
       greet.pl - Say hello!

SYNOPSIS
           perl greet.pl [--greeting <greeting>] [<who>]

ARGUMENTS
   who
       Who to greet. Defaults to "World".

OPTIONS
   greeting
       The greeting to use. Defaults to "Hello".

perl v5.14.2              2013-05-23                  GREET(1)
```

---
class: middle
.center[
# Help the User
Give them a `-h`and
]
```perl
use Getopt::Long;
use Pod::Usage;
my %opt;
GetOptions( \%opt,
    'help|h',
);
pod2usage(0) if $opt{help};
```
```
$ perl greet.pl -h
Usage:
        perl greet.pl [--greeting <greeting>] [<who>]
        perl -h|--help

Arguments:
  who:
    Who to greet. Defaults to "World".

Options:
  greeting:
    The greeting to use. Defaults to "Hello".

  help|h:
    Display help and usage
```
---
class: middle
.center[
# Scold the User
Tell them what they did wrong
]
```perl
use Getopt::Long;
use Pod::Usage;
my %opt;
GetOptions( \%opt,
    'help|h',
);
pod2usage(0) if $opt{help};
pod2usage("ERROR: Must give someone to greet") if !$ARGV[0];
```
```
$ perl greet.pl
ERROR: Must give someone to greet
Usage:
        perl greet.pl [--greeting <greeting>] [<who>]
        perl -h|--help
```
---
class: middle
.center[
# SHBANG!
]
```perl
#!/usr/bin/env perl
use feature qw( say );
say "Hello, World!";
```
```
$ ./hello.pl
bash: permission denied: ./hello.pl
$ chmod +x hello.pl
$ ./hello.pl
Hello, World!
```
---
class: middle
.center[
# Basic Script Boilerplate
]
```perl
#!/usr/bin/env perl
use strict;
use warnings;
use Getopt::Long;
use Pod::Usage;
my %opt;
GetOptions( \%opt,
    'help|h',
);
pod2usage(0) if $opt{help};

### Put your code here

=head1 NAME
=head1 SYNOPSIS
=head1 ARGUMENTS
=head1 OPTIONS
=head1 EXIT CODES
=head1 LICENSE AND COPYRIGHT
```
---

template: title

# Modulinos
Scripts as Modules

---
template: title

# What Next?

---

# .code[system() exec() qx()]
## .code[$?] in .code[perldoc perlvar]

---
    </textarea>
    <div id="slideshow"></div>
  </body>
</html>
